{% extends "base.html" %}

{% block title %}Transfer Ownership - Postly Team{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 40px auto; padding: 20px;">
    <div style="background: white; border-radius: 8px; padding: 30px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <h1>Transfer Ownership</h1>
        <p style="color: #666; margin-bottom: 30px;">
            <strong>Warning:</strong> This action will transfer complete control of <strong>{{ team.name }}</strong> to another admin member.
        </p>
        
        <form method="POST" action="{{ url_for('team_transfer_ownership') }}">
            <div class="form-group">
                <label for="new_owner_id">Select New Owner</label>
                {% if eligible_members %}
                <select class="form-control" id="new_owner_id" name="new_owner_id" required>
                    <option value="">-- Choose a member --</option>
                    {% for member in eligible_members %}
                    <option value="{{ member.id }}">
                        {{ member.user.first_name or member.user.username }} ({{ member.user.email }})
                    </option>
                    {% endfor %}
                </select>
                <small class="form-text text-muted">
                    Only admin members can become the new owner
                </small>
                {% else %}
                <p style="color: #dc3545;">
                    <i class="fas fa-exclamation-triangle"></i>
                    You must have at least one admin member to transfer ownership.
                </p>
                {% endif %}
            </div>
            
            <div style="background: #fff3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                <strong><i class="fas fa-info-circle"></i> What happens:</strong>
                <ul style="margin: 10px 0 0 0; padding-left: 20px;">
                    <li>You will no longer be the team owner</li>
                    <li>The selected member will become the new owner with full control</li>
                    <li>You will remain as an admin member unless changed by the new owner</li>
                    <li>You can reclaim ownership later if the new owner transfers it back</li>
                </ul>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="submit" class="btn btn-danger" {% if not eligible_members %}disabled{% endif %}>
                    <i class="fas fa-crown"></i> Transfer Ownership
                </button>
                <a href="{{ url_for('team_dashboard') }}" class="btn btn-secondary">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
