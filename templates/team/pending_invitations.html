{% extends "base.html" %}

{% block title %}Pending Invitations - Postly{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 40px auto; padding: 20px;">
    <h1 style="margin-bottom: 30px;">
        <i class="fas fa-envelope"></i> Team Invitations
    </h1>
    
    {% if invitations %}
        <div style="display: grid; gap: 20px;">
            {% for invitation in invitations %}
            <div style="background: white; border-radius: 8px; padding: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-left: 4px solid #0d6efd;">
                <div style="display: flex; justify-content: space-between; align-items: start; gap: 20px;">
                    <div style="flex: 1;">
                        <h3 style="margin: 0 0 10px 0; color: #333;">
                            {{ invitation.team_obj.name }}
                            <span style="font-size: 12px; color: #666; font-weight: normal;"> (Invited by: {{ invitation.inviter_name }})</span>
                        </h3>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <p style="margin: 0; font-size: 14px; color: #666;">
                                <strong>Your Role:</strong> 
                                <span style="display: inline-block; padding: 4px 8px; border-radius: 4px; background: {% if invitation.role == 'admin' %}#0dcaf0{% else %}#6c757d{% endif %}; color: white; font-size: 12px; font-weight: 600;">
                                    {{ invitation.role|upper }}
                                </span>
                            </p>
                            
                            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #dee2e6;">
                                <p style="margin: 0 0 10px 0; font-size: 12px; color: #666;"><strong>You will be able to:</strong></p>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px; color: #666;">
                                    {% if invitation.role == 'admin' %}
                                        <li>Invite and manage team members</li>
                                        <li>Assign channel permissions</li>
                                        <li>Approve posts from team members</li>
                                        <li>Configure channel-level settings</li>
                                    {% else %}
                                        <li>Create and schedule posts</li>
                                        <li>Request approval for posts (if required)</li>
                                        <li>View team analytics</li>
                                        <li>Collaborate with team members</li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                        
                        <div style="font-size: 12px; color: #999;">
                            <i class="fas fa-clock"></i> Invited on {{ invitation.created_at.strftime('%B %d, %Y') }}
                            {% if invitation.expires_at %}
                            | <i class="fas fa-hourglass-end"></i> Expires on {{ invitation.expires_at.strftime('%B %d, %Y') }}
                            {% endif %}
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 10px; min-width: 120px;">
                        <a href="{{ url_for('team_accept_invite', token=invitation.invitation_token) }}" 
                           class="btn btn-primary" style="text-decoration: none; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-check"></i> Accept
                        </a>
                        <form action="{{ url_for('team_decline_invite', token=invitation.invitation_token) }}" 
                              method="POST" style="display: flex;">
                            <button type="submit" class="btn btn-secondary" style="width: 100%; flex: 1;">
                                <i class="fas fa-times"></i> Decline
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="background: white; border-radius: 8px; padding: 60px 20px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <div style="font-size: 48px; color: #ccc; margin-bottom: 20px;">
                <i class="fas fa-inbox"></i>
            </div>
            <h3 style="color: #333; margin-bottom: 10px;">No Invitations</h3>
            <p style="color: #666;">You don't have any pending team invitations.</p>
            <a href="{{ url_for('team_dashboard') }}" class="btn btn-primary" style="margin-top: 20px;">
                <i class="fas fa-arrow-left"></i> Back to Team
            </a>
        </div>
    {% endif %}
</div>

<style>
    .btn {
        padding: 10px 16px;
        font-size: 14px;
        font-weight: 500;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .btn-primary {
        background: #0d6efd;
        color: white;
    }
    
    .btn-primary:hover {
        background: #0b5ed7;
        color: white;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    
    .btn-secondary:hover {
        background: #5a6268;
        color: white;
    }
</style>
{% endblock %}
